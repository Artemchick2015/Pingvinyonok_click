<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Penguin Clicker üêß</title>
<script src="https://telegram.org/js/telegram-web-app.js"></script>
<link rel="stylesheet" href="style.css">
<style>
  /* –õ–æ–∞–¥–µ—Ä */
  #loader-overlay {
    position: fixed;
    z-index: 9999;
    left: 0; top: 0; right: 0; bottom: 0;
    background: rgba(0,0,0,0.92);
    display: flex;
    align-items: center;
    justify-content: center;
    flex-direction: column;
  }
  .loader-content {
    text-align: center;
  }
  .loader-text {
    color: #fff;
    font-size: 1.5em;
    margin-bottom: 20px;
    letter-spacing: 2px;
  }
  .progress-bar {
    width: 300px;
    height: 16px;
    background: #333;
    border-radius: 8px;
    overflow: hidden;
    margin: 0 auto;
    box-shadow: 0 0 8px #ff0000;
  }
  .progress {
    height: 100%;
    width: 0;
    background: linear-gradient(90deg, #ff4163, #ff4b2b);
    transition: width 0.2s linear;
  }

  /* Boost animation */
  .boosted {
    animation: glow 0.5s infinite alternate;
    border-color: gold !important;
  }
  @keyframes glow {
    from { box-shadow: 0 0 10px gold; }
    to { box-shadow: 0 0 20px gold; }
  }
</style>
</head>
<body>
  <!-- Loader -->
  <div id="loader-overlay">
    <div class="loader-content">
      <div class="loader-text">Loading...</div>
      <div class="progress-bar">
        <div class="progress"></div>
      </div>
    </div>
  </div>

  <!-- –û—Å–Ω–æ–≤–Ω–∏–π –∫–æ–Ω—Ç–µ–Ω—Ç -->
  <div id="main-content" style="display:none;">
    <div class="container">
      <h1>Click on the Penguin!</h1>
      <div id="rank">Level: Newbie üê£</div>
      <div id="coinsPerClickDisplay">Coins per click: 1</div>

      <div class="penguin-wrapper" id="penguin">
        <span>üêß</span>
      </div>

      <p>Pingvi Coins: <span id="counter">0</span></p>
      <button id="saveBtn">Save result</button>
      <div id="profitPerHour">Profit per hour: 0 coins</div>
    </div>

    <!-- Promocode Menu -->
    <div class="promo-container" id="promoMenu">
      <h2>Enter the Promocode</h2>
      <input type="text" id="promoInput" placeholder="Enter your promo code" />
      <button id="submitPromo">Submit</button>
      <div id="promoResult"></div>
    </div>

    <!-- Upgrade Menu -->
    <div class="upgrade-container" id="upgradeMenu">
      <p>Upgrade: 2 Pingvi coins per click = 50 coins</p>
      <button class="upgrade-button" id="buyUpgrade">Buy Upgrade</button>
      <p>Super Upgrade: 10 Pingvi coins per click = 1500 coins</p>
      <button class="upgrade-button" id="buySuperUpgrade">Buy Super Upgrade</button>
      <p>Passive Income: 1000 Pingvi coins per hour = 1000 coins</p>
      <button class="upgrade-button" id="buyPassiveIncome">Buy Passive Income</button>
      <span class="close-upgrade" id="closeUpgrade">Back to Penguin</span>
    </div>

    <!-- Casino Game -->
    <div class="casino-container" id="casinoMenu">
      <h2>Welcome to Pingvi Casino</h2>
      <p>Invest Pingvi Coins to play. 5% chance to win 5x your bet!</p>
      <input type="number" id="casinoBet" placeholder="Enter your bet" min="1" />
      <button class="casino-button" id="playCasino">Play</button>
      <div class="casino-result" id="casinoResult"></div>
    </div>
  </div>

  <!-- –ú–µ–Ω—é –∫–Ω–æ–ø–æ–∫ –∑–Ω–∏–∑—É -->
  <div class="menu-wrapper" tabindex="0" aria-label="Main menu">
    <div class="menu" role="menubar">
      <button id="pingvinBtn" role="menuitem">Penguin</button>
      <button id="upgradeBtn" role="menuitem">Upgrade</button>
      <button id="gamesBtn" role="menuitem">Games</button>
      <button id="promoCodeBtn" role="menuitem">Promocode</button>
    </div>
  </div>

<script>
  // --- –ì–õ–û–ë–ê–õ–¨–ù–Ü –ó–ú–Ü–ù–ù–Ü ---
  let count = 0;
  let coinsPerClick = 1;
  let passiveIncome = false;
  let passiveIncomeRate = 1000 / 3600;
  let boostActive = false;
  let normalCoinsPerClick = 1;

  // --- –Ü–ù–Ü–¶–Ü–ê–õ–Ü–ó–ê–¶–Ü–Ø ---
  window.addEventListener('DOMContentLoaded', function() {
    // –õ–æ–∞–¥–µ—Ä
    const loader = document.getElementById('loader-overlay');
    const progress = loader.querySelector('.progress');
    let duration = 3000;
    let start = null;

    function animateProgressBar(timestamp) {
      if (!start) start = timestamp;
      let elapsed = timestamp - start;
      let percent = Math.min((elapsed / duration) * 100, 100);
      progress.style.width = percent + "%";
      if (elapsed < duration) {
        requestAnimationFrame(animateProgressBar);
      } else {
        loader.style.display = 'none';
        document.getElementById('main-content').style.display = 'block';
        loadGame();
      }
    }
    requestAnimationFrame(animateProgressBar);
  });

  function loadGame() {
    const savedCoins = localStorage.getItem("coins");
    const savedCoinsPerClick = localStorage.getItem("coinsPerClick");
    const savedPassiveIncome = localStorage.getItem("passiveIncome");

    if (savedCoins) count = parseInt(savedCoins);
    if (savedCoinsPerClick) coinsPerClick = parseInt(savedCoinsPerClick);
    if (savedPassiveIncome === "true") passiveIncome = true;

    updateUI();
    
    // –ü–∞—Å–∏–≤–Ω–∏–π –¥–æ—Ö—ñ–¥
    setInterval(() => {
      if (passiveIncome) {
        count += passiveIncomeRate;
        updateUI();
      }
    }, 1000);
  }

  // --- –û–ù–û–í–õ–ï–ù–ù–Ø –Ü–ù–¢–ï–†–§–ï–ô–°–£ ---
  function updateUI() {
    document.getElementById("counter").innerText = Math.floor(count);
    document.getElementById("coinsPerClickDisplay").innerText = `Coins per click: ${coinsPerClick}`;
    updateRank();
    updateProfitPerHour();
  }

  function updateRank() {
    const rankElement = document.getElementById("rank");
    if (count < 10) rankElement.innerText = "Level: Newbie üê£";
    else if (count < 50) rankElement.innerText = "Level: Pingvinyonok-student üêß";
    else if (count < 100) rankElement.innerText = "Level: Boss of the snow ‚ùÑÔ∏è";
    else rankElement.innerText = "Level: Pingvi-Legend üî•";
  }

  function updateProfitPerHour() {
    document.getElementById("profitPerHour").innerText = 
      `Profit per hour: ${passiveIncome ? Math.floor(1000) : 0} coins`;
  }

  // --- –ö–õ–Ü–ö –ü–û –ü–Ü–ù–ì–í–Ü–ù–£ ---
  document.getElementById("penguin").addEventListener("click", () => {
    count += coinsPerClick;
    updateUI();
    
    // Boost system
    const now = Date.now();
    clickTimes = clickTimes.filter(time => now - time < 1000);
    clickTimes.push(now);
    
    if (clickTimes.length >= 5 && !boostActive) {
      activateBoost();
    }
  });

  // --- BOOST SYSTEM ---
  let clickTimes = [];
  
  function activateBoost() {
    if (boostActive) return;
    
    boostActive = true;
    normalCoinsPerClick = coinsPerClick;
    coinsPerClick = normalCoinsPerClick * 2;
    
    document.getElementById("penguin").classList.add("boosted");
    
    setTimeout(() => {
      boostActive = false;
      coinsPerClick = normalCoinsPerClick;
      document.getElementById("penguin").classList.remove("boosted");
    }, 7000);
  }

  // --- –ê–ü–ì–†–ï–ô–î–ò ---
  document.getElementById("buyUpgrade").addEventListener("click", () => {
    if (count >= 50 && coinsPerClick === 1) {
      count -= 50;
      coinsPerClick = 2;
      updateUI();
    } else {
      alert(coinsPerClick > 1 ? "Upgrade already bought!" : "Not enough coins!");
    }
  });

  document.getElementById("buySuperUpgrade").addEventListener("click", () => {
    if (count >= 1500 && coinsPerClick < 10) {
      count -= 1500;
      coinsPerClick = 10;
      updateUI();
    } else {
      alert(coinsPerClick >= 10 ? "Super Upgrade already bought!" : "Not enough coins!");
    }
  });

  document.getElementById("buyPassiveIncome").addEventListener("click", () => {
    if (count >= 1000 && !passiveIncome) {
      count -= 1000;
      passiveIncome = true;
      updateUI();
    } else {
      alert(passiveIncome ? "Passive income already bought!" : "Not enough coins!");
    }
  });

  // --- –ö–ê–ó–ò–ù–û ---
  document.getElementById("playCasino").addEventListener("click", () => {
    const bet = parseInt(document.getElementById("casinoBet").value);
    if (bet > count || isNaN(bet) || bet <= 0) {
      alert("Invalid bet amount.");
      return;
    }
    
    count -= bet;
    const chance = Math.random();
    const casinoResultElement = document.getElementById("casinoResult");
    
    if (chance <= 0.05) {
      const winnings = bet * 5;
      count += winnings;
      casinoResultElement.innerText = `You win! +${winnings} Pingvi Coins`;
      casinoResultElement.className = "casino-result casino-win";
    } else {
      casinoResultElement.innerText = "Fail";
      casinoResultElement.className = "casino-result casino-fail";
    }
    
    updateUI();
  });

  // --- PROMOCODE ---
  document.getElementById("submitPromo").addEventListener("click", () => {
    const promoCode = document.getElementById("promoInput").value.trim().toLowerCase();
    const promoResultElement = document.getElementById("promoResult");
    
    if (localStorage.getItem("usedPromoCode") === "true") {
      promoResultElement.innerText = "You already used this promocode!";
      promoResultElement.className = "promo-fail";
      return;
    }
    
    if (promoCode === "pingvi10") {
      count += 1000;
      localStorage.setItem("usedPromoCode", "true");
      promoResultElement.innerText = "Promo code applied! +1000 Pingvi coins";
      promoResultElement.className = "promo-win";
      updateUI();
    } else {
      promoResultElement.innerText = "Invalid promo code!";
      promoResultElement.className = "promo-fail";
    }
  });

  // --- –ú–ï–ù–Æ –ù–ê–í–Ü–ì–ê–¶–Ü–á ---
  document.getElementById("pingvinBtn").addEventListener("click", () => {
    document.querySelector(".container").style.display = "block";
    document.getElementById("upgradeMenu").style.display = "none";
    document.getElementById("casinoMenu").style.display = "none";
    document.getElementById("promoMenu").style.display = "none";
  });

  document.getElementById("upgradeBtn").addEventListener("click", () => {
    document.querySelector(".container").style.display = "none";
    document.getElementById("upgradeMenu").style.display = "block";
    document.getElementById("casinoMenu").style.display = "none";
    document.getElementById("promoMenu").style.display = "none";
  });

  document.getElementById("gamesBtn").addEventListener("click", () => {
    document.querySelector(".container").style.display = "none";
    document.getElementById("upgradeMenu").style.display = "none";
    document.getElementById("casinoMenu").style.display = "block";
    document.getElementById("promoMenu").style.display = "none";
  });

  document.getElementById("promoCodeBtn").addEventListener("click", () => {
    document.querySelector(".container").style.display = "none";
    document.getElementById("upgradeMenu").style.display = "none";
    document.getElementById("casinoMenu").style.display = "none";
    document.getElementById("promoMenu").style.display = "block";
  });

  // --- –ê–í–¢–û–ó–ë–ï–†–ï–ñ–ï–ù–ù–Ø ---
  function saveGame() {
    localStorage.setItem("coins", count);
    localStorage.setItem("coinsPerClick", coinsPerClick);
    localStorage.setItem("passiveIncome", passiveIncome);
  }

  document.getElementById("saveBtn").addEventListener("click", saveGame);
  window.addEventListener("beforeunload", saveGame);
  document.addEventListener("visibilitychange", () => {
    if (document.visibilityState === "hidden") saveGame();
  });
</script>
</body>
</html>
